<% if @builds.any? %>
  <table border>
    <tr>
      <th>Start</th>
      <th>Branch</th>
      <th>Author</th>
      <th>Commit</th>
      <th>Commit Message</th>
      <th>Status</th>
      <th>Duration</th>
      <th>Actions</th>
    </tr>

    <% @builds.each do |build| %>
      <tr>
        <td>
          <%= link_to build.created_at,
            project_build_path(@project, build),
            data: { turbo_frame: "build_frame" },
            id: "build_link_#{build.id}" %>
        </td>

        <td><code><%= build.branch_name.truncate(20) %></code></td>
        <td><%= build.author_name %></td>
        <td><code><%= abbreviated_hash(build.commit_hash) %></code></td>
        <td><%= build.commit_message.truncate(30) %></td>
        <td class="build-status-<%= build.status.downcase %>"><%= build.status %></td>
        <td><%= build.duration_formatted %></td>
        <td>
          <%= button_to "Rerun", rebuilds_path(build_id: build.id), method: :post %>
        </td>
      </tr>
    <% end %>
  </table>
<% else %>
  (No builds)
<% end %>
